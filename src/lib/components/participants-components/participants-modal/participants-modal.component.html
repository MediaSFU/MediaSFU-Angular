<!-- Custom template override -->
<ng-container *ngIf="isParticipantsModalVisible && customTemplate">
  <ng-container *ngTemplateOutlet="customTemplate; context: {
    $implicit: {
      isParticipantsModalVisible,
      participantsCounter: participantsCounter_s,
      position,
      backgroundColor,
      parameters,
      onParticipantsClose,
      onParticipantsFilterChange,
      handleFilterChange: handleFilterChange.bind(this),
      handleClose: handleClose.bind(this)
    }
  }"></ng-container>
</ng-container>

<!-- Default template -->
<div *ngIf="isParticipantsModalVisible && !customTemplate"
     class="modal-container"
     [ngStyle]="getCombinedOverlayStyle()">
  <div class="modal-content"
       [ngStyle]="getCombinedContentStyle()">
    <div class="modal-header">
      <div>
        Participants <span class="badge">{{ participantsCounter_s }}</span>
      </div>
      <div class="close-icon" (click)="handleClose()">
        <fa-icon [icon]="faTimes" size="xl"></fa-icon>
      </div>
    </div>
    <div class="modal-body">
      <input type="text" class="filter-input" placeholder="Search ..." (input)="handleFilterChange($event)">
      <ng-container *ngIf="parameters.participants">
        <ng-container *ngIf="canShowParticipantList()">
          <app-participant-list
            [participants]="participant_s"
            [isBroadcast]="parameters.eventType === 'broadcast'"
            [onMuteParticipants]="onMuteParticipants"
            [onMessageParticipants]="onMessageParticipants"
            [onRemoveParticipants]="onRemoveParticipants"
            [socket]="parameters.socket"
            [coHostResponsibility]="parameters.coHostResponsibility"
            [coHost]="parameters.coHost"
            [member]="parameters.member"
            [islevel]="parameters.islevel"
            [roomName]="parameters.roomName"
            [updateIsMessagesModalVisible]="parameters.updateIsMessagesModalVisible"
            [updateStartDirectMessage]="parameters.updateStartDirectMessage"
            [updateDirectMessageDetails]="parameters.updateDirectMessageDetails"
            [updateParticipants]="parameters.updateParticipants"
          >
          </app-participant-list>
        </ng-container>
        <ng-container *ngIf="!canShowParticipantList()">
          <app-participant-list-others
            [participants]="participant_s"
            [coHost]="parameters.coHost"
            [member]="parameters.member"
            >
          </app-participant-list-others>
        </ng-container>
      </ng-container>
      <div *ngIf="!parameters.participants">No participants</div>
    </div>
  </div>
</div>
