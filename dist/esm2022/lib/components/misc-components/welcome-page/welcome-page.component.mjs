import { Component, Inject, Optional } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FontAwesomeModule } from '@fortawesome/angular-fontawesome';
import { faQrcode } from '@fortawesome/free-solid-svg-icons';
import { Validators, ReactiveFormsModule } from '@angular/forms';
import { CookieService } from 'ngx-cookie-service';
import { ZXingScannerModule } from '@zxing/ngx-scanner'; // Import the zxing-ngx-scanner module
import { Socket } from 'socket.io-client';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "ngx-cookie-service";
import * as i3 from "@zxing/ngx-scanner";
import * as i4 from "@angular/common";
import * as i5 from "@fortawesome/angular-fontawesome";
const MAX_ATTEMPTS = 10; // Maximum number of unsuccessful attempts before rate limiting
const RATE_LIMIT_DURATION = 3 * 60 * 60 * 1000; // 3 hours in milliseconds
export class WelcomePage {
    fb;
    cookieService;
    welcomeForm;
    error = '';
    isScannerVisible = false;
    scannedData = null;
    parameters = {};
    faQrcode = faQrcode;
    allowedCameras = []; // List of allowed cameras
    currentDevice = null; // Active camera device
    imgSrc = '';
    constructor(fb, cookieService, injectedParameters) {
        this.fb = fb;
        this.cookieService = cookieService;
        this.welcomeForm = this.fb.group({
            name: [
                '',
                [Validators.required, Validators.pattern('^[a-zA-Z0-9]+$'), Validators.maxLength(12)],
            ],
            secret: [
                '',
                [Validators.required, Validators.pattern('^[a-zA-Z0-9]+$'), Validators.maxLength(64)],
            ],
            eventID: [
                '',
                [Validators.required, Validators.pattern('^[a-zA-Z0-9]+$'), Validators.maxLength(32)],
            ],
            link: ['', [Validators.required, Validators.pattern('^https?://.+mediasfu\\.com.+$')]],
        });
        this.parameters = injectedParameters || this.parameters;
    }
    ngOnInit() {
        this.askForCameraPermission();
    }
    async checkLimitsAndMakeRequest(apiUserName, apiToken, link, userName) {
        const TIMEOUT_DURATION = 10000; // 10 seconds
        let unsuccessfulAttempts = parseInt(this.cookieService.get('unsuccessfulAttempts')) || 0;
        let lastRequestTimestamp = parseInt(this.cookieService.get('lastRequestTimestamp')) || 0;
        if (unsuccessfulAttempts >= MAX_ATTEMPTS) {
            if (Date.now() - lastRequestTimestamp < RATE_LIMIT_DURATION) {
                this.parameters.showAlert?.({
                    message: 'Too many unsuccessful attempts. Please try again later.',
                    type: 'danger',
                    duration: 3000,
                });
                this.cookieService.set('lastRequestTimestamp', Date.now().toString());
                return;
            }
            else {
                unsuccessfulAttempts = 0;
                this.cookieService.set('unsuccessfulAttempts', unsuccessfulAttempts.toString());
                this.cookieService.set('lastRequestTimestamp', Date.now().toString());
            }
        }
        try {
            this.parameters.updateIsLoadingModalVisible(true);
            const socketPromise = this.parameters.connectSocket({ apiUserName, apiToken, link });
            const timeoutPromise = new Promise((_, reject) => setTimeout(() => reject(new Error('Request timed out')), TIMEOUT_DURATION));
            const socket = await Promise.race([socketPromise, timeoutPromise]);
            if (socket && socket instanceof Socket && socket.id) {
                unsuccessfulAttempts = 0;
                this.cookieService.set('unsuccessfulAttempts', unsuccessfulAttempts.toString());
                this.cookieService.set('lastRequestTimestamp', Date.now().toString());
                this.parameters.updateSocket(socket);
                this.parameters.updateApiUserName(apiUserName);
                this.parameters.updateApiToken(apiToken);
                this.parameters.updateLink(link);
                this.parameters.updateRoomName(apiUserName);
                this.parameters.updateMember(userName);
                this.parameters.updateValidated(true);
            }
            else {
                unsuccessfulAttempts += 1;
                this.cookieService.set('unsuccessfulAttempts', unsuccessfulAttempts.toString());
                this.cookieService.set('lastRequestTimestamp', Date.now().toString());
                this.parameters.updateIsLoadingModalVisible(false);
                if (unsuccessfulAttempts >= MAX_ATTEMPTS) {
                    this.parameters.showAlert?.({
                        message: 'Too many unsuccessful attempts. Please try again later.',
                        type: 'danger',
                        duration: 3000,
                    });
                }
                else {
                    this.parameters.showAlert?.({
                        message: 'Invalid credentials.',
                        type: 'danger',
                        duration: 3000,
                    });
                }
            }
        }
        catch (error) {
            this.parameters.showAlert?.({
                message: 'Unable to connect. Check your credentials and try again.',
                type: 'danger',
                duration: 3000,
            });
            unsuccessfulAttempts += 1;
            this.cookieService.set('unsuccessfulAttempts', unsuccessfulAttempts.toString());
            this.cookieService.set('lastRequestTimestamp', Date.now().toString());
            this.parameters.updateIsLoadingModalVisible(false);
        }
    }
    handleScanSuccess(data) {
        try {
            const scannedText = data;
            const parts = scannedText.split(';');
            if (parts.length === 5) {
                const [userName, link, userSecret, passWord, meetingID] = parts;
                if (!userName.length ||
                    !link.length ||
                    !userSecret.length ||
                    !passWord.length ||
                    !meetingID.length ||
                    !this.validateAlphanumeric(userName) ||
                    !this.validateAlphanumeric(userSecret) ||
                    !this.validateAlphanumeric(passWord) ||
                    !this.validateAlphanumeric(meetingID) ||
                    userSecret.length !== 64 ||
                    userName.length > 12 ||
                    userName.length < 2 ||
                    meetingID.length > 32 ||
                    meetingID.length < 8 ||
                    !link.includes('mediasfu.com') ||
                    meetingID.toLowerCase().startsWith('d')) {
                    this.parameters.showAlert?.({
                        message: 'Invalid scanned data.',
                        type: 'danger',
                        duration: 3000,
                    });
                    return;
                }
                this.welcomeForm.setValue({
                    name: userName,
                    secret: userSecret,
                    eventID: meetingID,
                    link: link,
                });
                this.isScannerVisible = false;
                this.scannedData = null;
                this.checkLimitsAndMakeRequest(meetingID, userSecret, link, userName);
            }
            else {
                this.parameters.showAlert?.({
                    message: 'Invalid scanned data.',
                    type: 'danger',
                    duration: 3000,
                });
            }
        }
        catch (error) {
            this.parameters.showAlert?.({
                message: 'Invalid scanned data.',
                type: 'danger',
                duration: 3000,
            });
        }
    }
    validateAlphanumeric(str) {
        const alphanumericRegex = /^[a-zA-Z0-9]+$/;
        return alphanumericRegex.test(str);
    }
    // Method to list available cameras
    askForCameraPermission() {
        navigator.mediaDevices
            .enumerateDevices()
            .then((devices) => {
            this.allowedCameras = devices.filter((device) => device.kind === 'videoinput');
            if (this.allowedCameras.length > 0) {
                this.currentDevice = this.allowedCameras[0]; // Set the first available camera as the default
            }
        })
            .catch((err) => {
            console.error(err);
            this.parameters.showAlert?.({
                message: 'Camera access denied.',
                type: 'danger',
                duration: 3000,
            });
        });
    }
    toggleScanner() {
        this.isScannerVisible = !this.isScannerVisible;
        if (this.isScannerVisible) {
            this.askForCameraPermission();
        }
    }
    async handleConfirm() {
        if (this.welcomeForm.invalid) {
            this.error = 'Please fill all the fields correctly.';
            return;
        }
        const { name, secret, eventID, link } = this.welcomeForm.value;
        await this.checkLimitsAndMakeRequest(eventID, secret, link, name);
    }
    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.8", ngImport: i0, type: WelcomePage, deps: [{ token: i1.FormBuilder }, { token: i2.CookieService }, { token: 'parameters', optional: true }], target: i0.ɵɵFactoryTarget.Component });
    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "18.2.8", type: WelcomePage, isStandalone: true, selector: "app-welcome-page", providers: [CookieService], ngImport: i0, template: "<div class=\"container\">\r\n  <div class=\"logo-container\">\r\n    <img [src]=\"imgSrc || 'https://mediasfu.com/images/logo192.png'\" class=\"logo-image\" alt=\"Logo\" />\r\n  </div>\r\n  <form [formGroup]=\"welcomeForm\" (ngSubmit)=\"handleConfirm()\">\r\n    <div class=\"input-container\">\r\n      <input\r\n        formControlName=\"name\"\r\n        type=\"text\"\r\n        placeholder=\"Event Display Name\"\r\n        class=\"input-field\"\r\n      />\r\n      <input\r\n        formControlName=\"secret\"\r\n        type=\"text\"\r\n        placeholder=\"Event Token (Secret)\"\r\n        class=\"input-field\"\r\n      />\r\n      <input\r\n        formControlName=\"eventID\"\r\n        type=\"text\"\r\n        placeholder=\"Event ID\"\r\n        class=\"input-field\"\r\n      />\r\n      <input\r\n        formControlName=\"link\"\r\n        type=\"text\"\r\n        placeholder=\"Event Link\"\r\n        class=\"input-field\"\r\n      />\r\n    </div>\r\n    <button type=\"submit\" class=\"confirm-button\">Confirm</button>\r\n  </form>\r\n\r\n  <div class=\"scanner-container\">\r\n    <div class=\"or-container\">\r\n      <hr class=\"horizontal-line\" />\r\n      <span class=\"or-text\">OR</span>\r\n      <hr class=\"horizontal-line\" />\r\n    </div>\r\n    <div *ngIf=\"isScannerVisible\" class=\"scanner-wrapper\">\r\n      <zxing-scanner\r\n        [device]=\"currentDevice!\"\r\n        (scanSuccess)=\"handleScanSuccess($event)\"\r\n        [tryHarder]=\"true\"\r\n      ></zxing-scanner>\r\n    </div>\r\n    <div class=\"scan-button-container\" *ngIf=\"!isScannerVisible\">\r\n      <button (click)=\"toggleScanner()\" class=\"scan-button\">\r\n        <fa-icon [icon]=\"faQrcode\" style=\"margin-right: 5px\"></fa-icon>\r\n        Scan QR Code\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"additional-options-container\">\r\n    <p>\r\n      Provide the event details either by typing manually or scanning the\r\n      QR-code to autofill.\r\n    </p>\r\n    <p>Don't have a secret?</p>\r\n    <a\r\n      href=\"https://meeting.mediasfu.com/meeting/start/\"\r\n      target=\"_blank\"\r\n      class=\"link\"\r\n      >Get one from mediasfu.com</a\r\n    >\r\n  </div>\r\n</div>\r\n", styles: [".container{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100vw;height:100vh;max-width:100vw;max-height:100vh;margin:0;padding:0;background-color:#53c6e0;overflow:auto}.logo-container{margin-top:30px;padding-top:10px;margin-bottom:10px}.logo-image{width:100px;height:100px;border-radius:50%}.input-container{margin-bottom:10px;display:flex;flex-direction:column;align-items:center;justify-content:center}.input-field{height:30px;border-color:gray;border-width:1px;margin-bottom:10px;padding:0 5px;border-radius:5px}.confirm-button{background-color:#000;color:#fff;padding:5px;border-radius:5px;margin-bottom:10px;width:100%}.scanner-container{margin-bottom:10px;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.additional-options-container{text-align:center}.link{color:#00f;text-decoration:none;font-weight:700;margin-left:5px}.scan-button{background-color:#000;color:#fff;padding:10px 20px;border-radius:5px;margin-bottom:20px}.scan-button-container{display:flex;justify-content:center;align-items:center}.or-container{display:flex;align-items:center;justify-content:center;width:100%;margin:10px 0}.horizontal-line{flex-grow:1;height:1px;background-color:gray;margin:0 10px}.or-text{color:#000;font-size:medium;font-weight:700}.scanner-wrapper{width:300px;height:300px;max-width:300px;max-height:300px;overflow:hidden;position:relative}zxing-scanner{width:100%;height:100%;object-fit:cover}\n"], dependencies: [{ kind: "ngmodule", type: ZXingScannerModule }, { kind: "component", type: i3.ZXingScannerComponent, selector: "zxing-scanner", inputs: ["autofocusEnabled", "timeBetweenScans", "delayBetweenScanSuccess", "autostart", "previewFitMode", "poster", "device", "formats", "videoConstraints", "torch", "enable", "tryHarder"], outputs: ["autostarted", "autostarting", "torchCompatible", "scanSuccess", "scanFailure", "scanError", "scanComplete", "camerasFound", "camerasNotFound", "permissionResponse", "hasDevices", "deviceChange"] }, { kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "ngmodule", type: FontAwesomeModule }, { kind: "component", type: i5.FaIconComponent, selector: "fa-icon", inputs: ["icon", "title", "animation", "mask", "flip", "size", "pull", "border", "inverse", "symbol", "rotate", "fixedWidth", "transform", "a11yRole"] }, { kind: "ngmodule", type: ReactiveFormsModule }, { kind: "directive", type: i1.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { kind: "directive", type: i1.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i1.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i1.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i1.FormControlName, selector: "[formControlName]", inputs: ["formControlName", "disabled", "ngModel"], outputs: ["ngModelChange"] }] });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.8", ngImport: i0, type: WelcomePage, decorators: [{
            type: Component,
            args: [{ selector: 'app-welcome-page', standalone: true, imports: [ZXingScannerModule, CommonModule, FontAwesomeModule, ReactiveFormsModule], providers: [CookieService], template: "<div class=\"container\">\r\n  <div class=\"logo-container\">\r\n    <img [src]=\"imgSrc || 'https://mediasfu.com/images/logo192.png'\" class=\"logo-image\" alt=\"Logo\" />\r\n  </div>\r\n  <form [formGroup]=\"welcomeForm\" (ngSubmit)=\"handleConfirm()\">\r\n    <div class=\"input-container\">\r\n      <input\r\n        formControlName=\"name\"\r\n        type=\"text\"\r\n        placeholder=\"Event Display Name\"\r\n        class=\"input-field\"\r\n      />\r\n      <input\r\n        formControlName=\"secret\"\r\n        type=\"text\"\r\n        placeholder=\"Event Token (Secret)\"\r\n        class=\"input-field\"\r\n      />\r\n      <input\r\n        formControlName=\"eventID\"\r\n        type=\"text\"\r\n        placeholder=\"Event ID\"\r\n        class=\"input-field\"\r\n      />\r\n      <input\r\n        formControlName=\"link\"\r\n        type=\"text\"\r\n        placeholder=\"Event Link\"\r\n        class=\"input-field\"\r\n      />\r\n    </div>\r\n    <button type=\"submit\" class=\"confirm-button\">Confirm</button>\r\n  </form>\r\n\r\n  <div class=\"scanner-container\">\r\n    <div class=\"or-container\">\r\n      <hr class=\"horizontal-line\" />\r\n      <span class=\"or-text\">OR</span>\r\n      <hr class=\"horizontal-line\" />\r\n    </div>\r\n    <div *ngIf=\"isScannerVisible\" class=\"scanner-wrapper\">\r\n      <zxing-scanner\r\n        [device]=\"currentDevice!\"\r\n        (scanSuccess)=\"handleScanSuccess($event)\"\r\n        [tryHarder]=\"true\"\r\n      ></zxing-scanner>\r\n    </div>\r\n    <div class=\"scan-button-container\" *ngIf=\"!isScannerVisible\">\r\n      <button (click)=\"toggleScanner()\" class=\"scan-button\">\r\n        <fa-icon [icon]=\"faQrcode\" style=\"margin-right: 5px\"></fa-icon>\r\n        Scan QR Code\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"additional-options-container\">\r\n    <p>\r\n      Provide the event details either by typing manually or scanning the\r\n      QR-code to autofill.\r\n    </p>\r\n    <p>Don't have a secret?</p>\r\n    <a\r\n      href=\"https://meeting.mediasfu.com/meeting/start/\"\r\n      target=\"_blank\"\r\n      class=\"link\"\r\n      >Get one from mediasfu.com</a\r\n    >\r\n  </div>\r\n</div>\r\n", styles: [".container{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100vw;height:100vh;max-width:100vw;max-height:100vh;margin:0;padding:0;background-color:#53c6e0;overflow:auto}.logo-container{margin-top:30px;padding-top:10px;margin-bottom:10px}.logo-image{width:100px;height:100px;border-radius:50%}.input-container{margin-bottom:10px;display:flex;flex-direction:column;align-items:center;justify-content:center}.input-field{height:30px;border-color:gray;border-width:1px;margin-bottom:10px;padding:0 5px;border-radius:5px}.confirm-button{background-color:#000;color:#fff;padding:5px;border-radius:5px;margin-bottom:10px;width:100%}.scanner-container{margin-bottom:10px;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.additional-options-container{text-align:center}.link{color:#00f;text-decoration:none;font-weight:700;margin-left:5px}.scan-button{background-color:#000;color:#fff;padding:10px 20px;border-radius:5px;margin-bottom:20px}.scan-button-container{display:flex;justify-content:center;align-items:center}.or-container{display:flex;align-items:center;justify-content:center;width:100%;margin:10px 0}.horizontal-line{flex-grow:1;height:1px;background-color:gray;margin:0 10px}.or-text{color:#000;font-size:medium;font-weight:700}.scanner-wrapper{width:300px;height:300px;max-width:300px;max-height:300px;overflow:hidden;position:relative}zxing-scanner{width:100%;height:100%;object-fit:cover}\n"] }]
        }], ctorParameters: () => [{ type: i1.FormBuilder }, { type: i2.CookieService }, { type: undefined, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: ['parameters']
                }] }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2VsY29tZS1wYWdlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL21lZGlhc2Z1LWFuZ3VsYXIvc3JjL2xpYi9jb21wb25lbnRzL21pc2MtY29tcG9uZW50cy93ZWxjb21lLXBhZ2Uvd2VsY29tZS1wYWdlLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL21lZGlhc2Z1LWFuZ3VsYXIvc3JjL2xpYi9jb21wb25lbnRzL21pc2MtY29tcG9uZW50cy93ZWxjb21lLXBhZ2Uvd2VsY29tZS1wYWdlLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFVLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNwRSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDL0MsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDckUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLG1DQUFtQyxDQUFDO0FBQzdELE9BQU8sRUFBMEIsVUFBVSxFQUFFLG1CQUFtQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDekYsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLG9CQUFvQixDQUFDLENBQUMsc0NBQXNDO0FBQy9GLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQzs7Ozs7OztBQUkxQyxNQUFNLFlBQVksR0FBRyxFQUFFLENBQUMsQ0FBQywrREFBK0Q7QUFDeEYsTUFBTSxtQkFBbUIsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQywwQkFBMEI7QUFnQzFFLE1BQU0sT0FBTyxXQUFXO0lBWVo7SUFDQTtJQVpWLFdB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QUM7SUFFRCxhQUFhO1FBQ1gsSUFBSSxDQUFDLGdCQUFnQixHQUFHLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDO1FBQy9DLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDMUIsSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUM7UUFDaEMsQ0FBQztJQUNILENBQUM7SUFFRCxLQUFLLENBQUMsYUFBYTtRQUNqQixJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDN0IsSUFBSSxDQUFDLEtBQUssR0FBRyx1Q0FBdUMsQ0FBQztZQUNyRCxPQUFPO1FBQ1QsQ0FBQztRQUVELE1BQU0sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQztRQUUvRCxNQUFNLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNwRSxDQUFDO3VHQTlOVSxXQUFXLDBFQWNBLFlBQVk7MkZBZHZCLFdBQVcsK0RBRlgsQ0FBQyxhQUFhLENBQUMsMEJDMUM1QiwrckVBcUVBLHcvQ0Q1Qlksa0JBQWtCLDhmQUFFLFlBQVksa0lBQUUsaUJBQWlCLDRQQUFFLG1CQUFtQjs7MkZBR3ZFLFdBQVc7a0JBUnZCLFNBQVM7K0JBQ0Usa0JBQWtCLGNBR2hCLElBQUksV0FDUCxDQUFDLGtCQUFrQixFQUFFLFlBQVksRUFBRSxpQkFBaUIsRUFBRSxtQkFBbUIsQ0FBQyxhQUN4RSxDQUFDLGFBQWEsQ0FBQzs7MEJBZ0J2QixRQUFROzswQkFBSSxNQUFNOzJCQUFDLFlBQVkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEluamVjdCwgT25Jbml0LCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IEZvbnRBd2Vzb21lTW9kdWxlIH0gZnJvbSAnQGZvcnRhd2Vzb21lL2FuZ3VsYXItZm9udGF3ZXNvbWUnO1xuaW1wb3J0IHsgZmFRcmNvZGUgfSBmcm9tICdAZm9ydGF3ZXNvbWUvZnJlZS1zb2xpZC1zdmctaWNvbnMnO1xuaW1wb3J0IHsgRm9ybUJ1aWxkZXIsIEZvcm1Hcm91cCwgVmFsaWRhdG9ycywgUmVhY3RpdmVGb3Jtc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IENvb2tpZVNlcnZpY2UgfSBmcm9tICduZ3gtY29va2llLXNlcnZpY2UnO1xuaW1wb3J0IHsgWlhpbmdTY2FubmVyTW9kdWxlIH0gZnJvbSAnQHp4aW5nL25neC1zY2FubmVyJzsgLy8gSW1wb3J0IHRoZSB6eGluZy1uZ3gtc2Nhbm5lciBtb2R1bGVcbmltcG9ydCB7IFNvY2tldCB9IGZyb20gJ3NvY2tldC5pby1jbGllbnQnO1xuaW1wb3J0IHsgQ29ubmVjdFNvY2tldFR5cGUgfSBmcm9tICcuLi8uLi8uLi9zb2NrZXRzL3NvY2tldC1tYW5hZ2VyLnNlcnZpY2UnO1xuaW1wb3J0IHsgU2hvd0FsZXJ0IH0gZnJvbSAnLi4vLi4vLi4vQHR5cGVzL3R5cGVzJztcblxuY29uc3QgTUFYX0FUVEVNUFRTID0gMTA7IC8vIE1heGltdW0gbnVtYmVyIG9mIHVuc3VjY2Vzc2Z1bCBhdHRlbXB0cyBiZWZvcmUgcmF0ZSBsaW1pdGluZ1xuY29uc3QgUkFURV9MSU1JVF9EVVJBVElPTiA9IDMgKiA2MCAqIDYwICogMTAwMDsgLy8gMyBob3VycyBpbiBtaWxsaXNlY29uZHNcblxuZXhwb3J0IGludGVyZmFjZSBXZWxjb21lUGFnZVBhcmFtZXRlcnMge1xuICBpbWdTcmM/OiBzdHJpbmc7XG4gIHNob3dBbGVydD86IFNob3dBbGVydDtcbiAgdXBkYXRlSXNMb2FkaW5nTW9kYWxWaXNpYmxlOiAodmlzaWJsZTogYm9vbGVhbikgPT4gdm9pZDtcbiAgY29ubmVjdFNvY2tldDogQ29ubmVjdFNvY2tldFR5cGU7XG4gIHVwZGF0ZVNvY2tldDogKHNvY2tldDogU29ja2V0KSA9PiB2b2lkO1xuICB1cGRhdGVWYWxpZGF0ZWQ6ICh2YWxpZGF0ZWQ6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHVwZGF0ZUFwaVVzZXJOYW1lOiAoYXBpVXNlck5hbWU6IHN0cmluZykgPT4gdm9pZDtcbiAgdXBkYXRlQXBpVG9rZW46IChhcGlUb2tlbjogc3RyaW5nKSA9PiB2b2lkO1xuICB1cGRhdGVMaW5rOiAobGluazogc3RyaW5nKSA9PiB2b2lkO1xuICB1cGRhdGVSb29tTmFtZTogKHJvb21OYW1lOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHVwZGF0ZU1lbWJlcjogKHVzZXJOYW1lOiBzdHJpbmcpID0+IHZvaWQ7XG59XG5cbi8vIERlZmluZSB0aGUgcHJvcCB0eXBlIGZvciB0aGUgY29tcG9uZW50XG5leHBvcnQgaW50ZXJmYWNlIFdlbGNvbWVQYWdlT3B0aW9ucyB7XG4gIHBhcmFtZXRlcnM6IFdlbGNvbWVQYWdlUGFyYW1ldGVycztcbn1cblxuLy8gRGVmaW5lIHRoZSB0eXBlIGZvciB0aGUgY29tcG9uZW50IGZ1bmN0aW9uXG5leHBvcnQgdHlwZSBXZWxjb21lUGFnZVR5cGUgPSAob3B0aW9uczogV2VsY29tZVBhZ2VPcHRpb25zKSA9PiBIVE1MRWxlbWVudDtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYXBwLXdlbGNvbWUtcGFnZScsXG4gIHRlbXBsYXRlVXJsOiAnLi93ZWxjb21lLXBhZ2UuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi93ZWxjb21lLXBhZ2UuY29tcG9uZW50LmNzcyddLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbWlhpbmdTY2FubmVyTW9kdWxlLCBDb21tb25Nb2R1bGUsIEZvbnRBd2Vzb21lTW9kdWxlLCBSZWFjdGl2ZUZvcm1zTW9kdWxlXSxcbiAgcHJvdmlkZXJzOiBbQ29va2llU2VydmljZV0sXG59KVxuZXhwb3J0IGNsYXNzIFdlbGNvbWVQYWdlIGltcGxlbWVudHMgT25Jbml0IHtcbiAgd2VsY29tZUZvcm06IEZvcm1Hcm91cDtcbiAgZXJyb3IgPSAnJztcbiAgaXNTY2FubmVyVmlzaWJsZSA9IGZhbHNlO1xuICBzY2FubmVkRGF0YTogYW55ID0gbnVsbDtcbiAgcGFyYW1ldGVyczogV2VsY29tZVBhZ2VQYXJhbWV0ZXJzID0ge30gYXMgV2VsY29tZVBhZ2VQYXJhbWV0ZXJzO1xuICBmYVFyY29kZSA9IGZhUXJjb2RlO1xuICBhbGxvd2VkQ2FtZXJhczogTWVkaWFEZXZpY2VJbmZvW10gPSBbXTsgLy8gTGlzdCBvZiBhbGxvd2VkIGNhbWVyYXNcbiAgY3VycmVudERldmljZTogTWVkaWFEZXZpY2VJbmZvIHwgbnVsbCA9IG51bGw7IC8vIEFjdGl2ZSBjYW1lcmEgZGV2aWNlXG4gIGltZ1NyYyA9ICcnO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZmI6IEZvcm1CdWlsZGVyLFxuICAgIHByaXZhdGUgY29va2llU2VydmljZTogQ29va2llU2VydmljZSxcbiAgICBAT3B0aW9uYWwoKSBASW5qZWN0KCdwYXJhbWV0ZXJzJykgaW5qZWN0ZWRQYXJhbWV0ZXJzOiBXZWxjb21lUGFnZVBhcmFtZXRlcnMsXG4gICkge1xuICAgIHRoaXMud2VsY29tZUZvcm0gPSB0aGlzLmZiLmdyb3VwKHtcbiAgICAgIG5hbWU6IFtcbiAgICAgICAgJycsXG4gICAgICAgIFtWYWxpZGF0b3JzLnJlcXVpcmVkLCBWYWxpZGF0b3JzLnBhdHRlcm4oJ15bYS16QS1aMC05XSskJyksIFZhbGlkYXRvcnMubWF4TGVuZ3RoKDEyKV0sXG4gICAgICBdLFxuICAgICAgc2VjcmV0OiBbXG4gICAgICAgICcnLFxuICAgICAgICBbVmFsaWRhdG9ycy5yZXF1aXJlZCwgVmFsaWRhdG9ycy5wYXR0ZXJuKCdeW2EtekEtWjAtOV0rJCcpLCBWYWxpZGF0b3JzLm1heExlbmd0aCg2NCldLFxuICAgICAgXSxcbiAgICAgIGV2ZW50SUQ6IFtcbiAgICAgICAgJycsXG4gICAgICAgIFtWYWxpZGF0b3JzLnJlcXVpcmVkLCBWYWxpZGF0b3JzLnBhdHRlcm4oJ15bYS16QS1aMC05XSskJyksIFZhbGlkYXRvcnMubWF4TGVuZ3RoKDMyKV0sXG4gICAgICBdLFxuICAgICAgbGluazogWycnLCBbVmFsaWRhdG9ycy5yZXF1aXJlZCwgVmFsaWRhdG9ycy5wYXR0ZXJuKCdeaHR0cHM/Oi8vLittZWRpYXNmdVxcXFwuY29tLiskJyldXSxcbiAgICB9KTtcbiAgICB0aGlzLnBhcmFtZXRlcnMgPSBpbmplY3RlZFBhcmFtZXRlcnMgfHwgdGhpcy5wYXJhbWV0ZXJzO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5hc2tGb3JDYW1lcmFQZXJtaXNzaW9uKCk7XG4gIH1cblxuICBhc3luYyBjaGVja0xpbWl0c0FuZE1ha2VSZXF1ZXN0KFxuICAgIGFwaVVzZXJOYW1lOiBzdHJpbmcsXG4gICAgYXBpVG9rZW46IHN0cmluZyxcbiAgICBsaW5rOiBzdHJpbmcsXG4gICAgdXNlck5hbWU6IHN0cmluZyxcbiAgKSB7XG4gICAgY29uc3QgVElNRU9VVF9EVVJBVElPTiA9IDEwMDAwOyAvLyAxMCBzZWNvbmRzXG5cbiAgICBsZXQgdW5zdWNjZXNzZnVsQXR0ZW1wdHMgPSBwYXJzZUludCh0aGlzLmNvb2tpZVNlcnZpY2UuZ2V0KCd1bnN1Y2Nlc3NmdWxBdHRlbXB0cycpKSB8fCAwO1xuICAgIGxldCBsYXN0UmVxdWVzdFRpbWVzdGFtcCA9IHBhcnNlSW50KHRoaXMuY29va2llU2VydmljZS5nZXQoJ2xhc3RSZXF1ZXN0VGltZXN0YW1wJykpIHx8IDA7XG5cbiAgICBpZiAodW5zdWNjZXNzZnVsQXR0ZW1wdHMgPj0gTUFYX0FUVEVNUFRTKSB7XG4gICAgICBpZiAoRGF0ZS5ub3coKSAtIGxhc3RSZXF1ZXN0VGltZXN0YW1wIDwgUkFURV9MSU1JVF9EVVJBVElPTikge1xuICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2hvd0FsZXJ0Py4oe1xuICAgICAgICAgIG1lc3NhZ2U6ICdUb28gbWFueSB1bnN1Y2Nlc3NmdWwgYXR0ZW1wdHMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyxcbiAgICAgICAgICB0eXBlOiAnZGFuZ2VyJyxcbiAgICAgICAgICBkdXJhdGlvbjogMzAwMCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29va2llU2VydmljZS5zZXQoJ2xhc3RSZXF1ZXN0VGltZXN0YW1wJywgRGF0ZS5ub3coKS50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdW5zdWNjZXNzZnVsQXR0ZW1wdHMgPSAwO1xuICAgICAgICB0aGlzLmNvb2tpZVNlcnZpY2Uuc2V0KCd1bnN1Y2Nlc3NmdWxBdHRlbXB0cycsIHVuc3VjY2Vzc2Z1bEF0dGVtcHRzLnRvU3RyaW5nKCkpO1xuICAgICAgICB0aGlzLmNvb2tpZVNlcnZpY2Uuc2V0KCdsYXN0UmVxdWVzdFRpbWVzdGFtcCcsIERhdGUubm93KCkudG9TdHJpbmcoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucGFyYW1ldGVycy51cGRhdGVJc0xvYWRpbmdNb2RhbFZpc2libGUodHJ1ZSk7XG5cbiAgICAgIGNvbnN0IHNvY2tldFByb21pc2UgPSB0aGlzLnBhcmFtZXRlcnMuY29ubmVjdFNvY2tldCh7IGFwaVVzZXJOYW1lLCBhcGlUb2tlbiwgbGluayB9KTtcbiAgICAgIGNvbnN0IHRpbWVvdXRQcm9taXNlID0gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiByZWplY3QobmV3IEVycm9yKCdSZXF1ZXN0IHRpbWVkIG91dCcpKSwgVElNRU9VVF9EVVJBVElPTiksXG4gICAgICApO1xuXG4gICAgICBjb25zdCBzb2NrZXQgPSBhd2FpdCBQcm9taXNlLnJhY2UoW3NvY2tldFByb21pc2UsIHRpbWVvdXRQcm9taXNlXSk7XG5cbiAgICAgIGlmIChzb2NrZXQgJiYgc29ja2V0IGluc3RhbmNlb2YgU29ja2V0ICYmIHNvY2tldC5pZCkge1xuICAgICAgICB1bnN1Y2Nlc3NmdWxBdHRlbXB0cyA9IDA7XG4gICAgICAgIHRoaXMuY29va2llU2VydmljZS5zZXQoJ3Vuc3VjY2Vzc2Z1bEF0dGVtcHRzJywgdW5zdWNjZXNzZnVsQXR0ZW1wdHMudG9TdHJpbmcoKSk7XG4gICAgICAgIHRoaXMuY29va2llU2VydmljZS5zZXQoJ2xhc3RSZXF1ZXN0VGltZXN0YW1wJywgRGF0ZS5ub3coKS50b1N0cmluZygpKTtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnVwZGF0ZVNvY2tldChzb2NrZXQpO1xuICAgICAgICB0aGlzLnBhcmFtZXRlcnMudXBkYXRlQXBpVXNlck5hbWUoYXBpVXNlck5hbWUpO1xuICAgICAgICB0aGlzLnBhcmFtZXRlcnMudXBkYXRlQXBpVG9rZW4oYXBpVG9rZW4pO1xuICAgICAgICB0aGlzLnBhcmFtZXRlcnMudXBkYXRlTGluayhsaW5rKTtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnVwZGF0ZVJvb21OYW1lKGFwaVVzZXJOYW1lKTtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnVwZGF0ZU1lbWJlcih1c2VyTmFtZSk7XG4gICAgICAgIHRoaXMucGFyYW1ldGVycy51cGRhdGVWYWxpZGF0ZWQodHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1bnN1Y2Nlc3NmdWxBdHRlbXB0cyArPSAxO1xuICAgICAgICB0aGlzLmNvb2tpZVNlcnZpY2Uuc2V0KCd1bnN1Y2Nlc3NmdWxBdHRlbXB0cycsIHVuc3VjY2Vzc2Z1bEF0dGVtcHRzLnRvU3RyaW5nKCkpO1xuICAgICAgICB0aGlzLmNvb2tpZVNlcnZpY2Uuc2V0KCdsYXN0UmVxdWVzdFRpbWVzdGFtcCcsIERhdGUubm93KCkudG9TdHJpbmcoKSk7XG4gICAgICAgIHRoaXMucGFyYW1ldGVycy51cGRhdGVJc0xvYWRpbmdNb2RhbFZpc2libGUoZmFsc2UpO1xuXG4gICAgICAgIGlmICh1bnN1Y2Nlc3NmdWxBdHRlbXB0cyA+PSBNQVhfQVRURU1QVFMpIHtcbiAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2hvd0FsZXJ0Py4oe1xuICAgICAgICAgICAgbWVzc2FnZTogJ1RvbyBtYW55IHVuc3VjY2Vzc2Z1bCBhdHRlbXB0cy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxuICAgICAgICAgICAgdHlwZTogJ2RhbmdlcicsXG4gICAgICAgICAgICBkdXJhdGlvbjogMzAwMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2hvd0FsZXJ0Py4oe1xuICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgY3JlZGVudGlhbHMuJyxcbiAgICAgICAgICAgIHR5cGU6ICdkYW5nZXInLFxuICAgICAgICAgICAgZHVyYXRpb246IDMwMDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNob3dBbGVydD8uKHtcbiAgICAgICAgbWVzc2FnZTogJ1VuYWJsZSB0byBjb25uZWN0LiBDaGVjayB5b3VyIGNyZWRlbnRpYWxzIGFuZCB0cnkgYWdhaW4uJyxcbiAgICAgICAgdHlwZTogJ2RhbmdlcicsXG4gICAgICAgIGR1cmF0aW9uOiAzMDAwLFxuICAgICAgfSk7XG5cbiAgICAgIHVuc3VjY2Vzc2Z1bEF0dGVtcHRzICs9IDE7XG4gICAgICB0aGlzLmNvb2tpZVNlcnZpY2Uuc2V0KCd1bnN1Y2Nlc3NmdWxBdHRlbXB0cycsIHVuc3VjY2Vzc2Z1bEF0dGVtcHRzLnRvU3RyaW5nKCkpO1xuICAgICAgdGhpcy5jb29raWVTZXJ2aWNlLnNldCgnbGFzdFJlcXVlc3RUaW1lc3RhbXAnLCBEYXRlLm5vdygpLnRvU3RyaW5nKCkpO1xuICAgICAgdGhpcy5wYXJhbWV0ZXJzLnVwZGF0ZUlzTG9hZGluZ01vZGFsVmlzaWJsZShmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlU2NhblN1Y2Nlc3MoZGF0YTogYW55KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNjYW5uZWRUZXh0ID0gZGF0YTtcbiAgICAgIGNvbnN0IHBhcnRzID0gc2Nhbm5lZFRleHQuc3BsaXQoJzsnKTtcblxuICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gNSkge1xuICAgICAgICBjb25zdCBbdXNlck5hbWUsIGxpbmssIHVzZXJTZWNyZXQsIHBhc3NXb3JkLCBtZWV0aW5nSURdID0gcGFydHM7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICF1c2VyTmFtZS5sZW5ndGggfHxcbiAgICAgICAgICAhbGluay5sZW5ndGggfHxcbiAgICAgICAgICAhdXNlclNlY3JldC5sZW5ndGggfHxcbiAgICAgICAgICAhcGFzc1dvcmQubGVuZ3RoIHx8XG4gICAgICAgICAgIW1lZXRpbmdJRC5sZW5ndGggfHxcbiAgICAgICAgICAhdGhpcy52YWxpZGF0ZUFscGhhbnVtZXJpYyh1c2VyTmFtZSkgfHxcbiAgICAgICAgICAhdGhpcy52YWxpZGF0ZUFscGhhbnVtZXJpYyh1c2VyU2VjcmV0KSB8fFxuICAgICAgICAgICF0aGlzLnZhbGlkYXRlQWxwaGFudW1lcmljKHBhc3NXb3JkKSB8fFxuICAgICAgICAgICF0aGlzLnZhbGlkYXRlQWxwaGFudW1lcmljKG1lZXRpbmdJRCkgfHxcbiAgICAgICAgICB1c2VyU2VjcmV0Lmxlbmd0aCAhPT0gNjQgfHxcbiAgICAgICAgICB1c2VyTmFtZS5sZW5ndGggPiAxMiB8fFxuICAgICAgICAgIHVzZXJOYW1lLmxlbmd0aCA8IDIgfHxcbiAgICAgICAgICBtZWV0aW5nSUQubGVuZ3RoID4gMzIgfHxcbiAgICAgICAgICBtZWV0aW5nSUQubGVuZ3RoIDwgOCB8fFxuICAgICAgICAgICFsaW5rLmluY2x1ZGVzKCdtZWRpYXNmdS5jb20nKSB8fFxuICAgICAgICAgIG1lZXRpbmdJRC50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoJ2QnKVxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2hvd0FsZXJ0Py4oe1xuICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgc2Nhbm5lZCBkYXRhLicsXG4gICAgICAgICAgICB0eXBlOiAnZGFuZ2VyJyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMud2VsY29tZUZvcm0uc2V0VmFsdWUoe1xuICAgICAgICAgIG5hbWU6IHVzZXJOYW1lLFxuICAgICAgICAgIHNlY3JldDogdXNlclNlY3JldCxcbiAgICAgICAgICBldmVudElEOiBtZWV0aW5nSUQsXG4gICAgICAgICAgbGluazogbGluayxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5pc1NjYW5uZXJWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2Nhbm5lZERhdGEgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuY2hlY2tMaW1pdHNBbmRNYWtlUmVxdWVzdChtZWV0aW5nSUQsIHVzZXJTZWNyZXQsIGxpbmssIHVzZXJOYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGFyYW1ldGVycy5zaG93QWxlcnQ/Lih7XG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgc2Nhbm5lZCBkYXRhLicsXG4gICAgICAgICAgdHlwZTogJ2RhbmdlcicsXG4gICAgICAgICAgZHVyYXRpb246IDMwMDAsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLnBhcmFtZXRlcnMuc2hvd0FsZXJ0Py4oe1xuICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBzY2FubmVkIGRhdGEuJyxcbiAgICAgICAgdHlwZTogJ2RhbmdlcicsXG4gICAgICAgIGR1cmF0aW9uOiAzMDAwLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgdmFsaWRhdGVBbHBoYW51bWVyaWMoc3RyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBhbHBoYW51bWVyaWNSZWdleCA9IC9eW2EtekEtWjAtOV0rJC87XG4gICAgcmV0dXJuIGFscGhhbnVtZXJpY1JlZ2V4LnRlc3Qoc3RyKTtcbiAgfVxuXG4gIC8vIE1ldGhvZCB0byBsaXN0IGF2YWlsYWJsZSBjYW1lcmFzXG4gIGFza0ZvckNhbWVyYVBlcm1pc3Npb24oKSB7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlc1xuICAgICAgLmVudW1lcmF0ZURldmljZXMoKVxuICAgICAgLnRoZW4oKGRldmljZXM6IE1lZGlhRGV2aWNlSW5mb1tdKSA9PiB7XG4gICAgICAgIHRoaXMuYWxsb3dlZENhbWVyYXMgPSBkZXZpY2VzLmZpbHRlcigoZGV2aWNlKSA9PiBkZXZpY2Uua2luZCA9PT0gJ3ZpZGVvaW5wdXQnKTtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dlZENhbWVyYXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuY3VycmVudERldmljZSA9IHRoaXMuYWxsb3dlZENhbWVyYXNbMF07IC8vIFNldCB0aGUgZmlyc3QgYXZhaWxhYmxlIGNhbWVyYSBhcyB0aGUgZGVmYXVsdFxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2hvd0FsZXJ0Py4oe1xuICAgICAgICAgIG1lc3NhZ2U6ICdDYW1lcmEgYWNjZXNzIGRlbmllZC4nLFxuICAgICAgICAgIHR5cGU6ICdkYW5nZXInLFxuICAgICAgICAgIGR1cmF0aW9uOiAzMDAwLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICB9XG5cbiAgdG9nZ2xlU2Nhbm5lcigpIHtcbiAgICB0aGlzLmlzU2Nhbm5lclZpc2libGUgPSAhdGhpcy5pc1NjYW5uZXJWaXNpYmxlO1xuICAgIGlmICh0aGlzLmlzU2Nhbm5lclZpc2libGUpIHtcbiAgICAgIHRoaXMuYXNrRm9yQ2FtZXJhUGVybWlzc2lvbigpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGhhbmRsZUNvbmZpcm0oKSB7XG4gICAgaWYgKHRoaXMud2VsY29tZUZvcm0uaW52YWxpZCkge1xuICAgICAgdGhpcy5lcnJvciA9ICdQbGVhc2UgZmlsbCBhbGwgdGhlIGZpZWxkcyBjb3JyZWN0bHkuJztcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7IG5hbWUsIHNlY3JldCwgZXZlbnRJRCwgbGluayB9ID0gdGhpcy53ZWxjb21lRm9ybS52YWx1ZTtcblxuICAgIGF3YWl0IHRoaXMuY2hlY2tMaW1pdHNBbmRNYWtlUmVxdWVzdChldmVudElELCBzZWNyZXQsIGxpbmssIG5hbWUpO1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+XHJcbiAgPGRpdiBjbGFzcz1cImxvZ28tY29udGFpbmVyXCI+XHJcbiAgICA8aW1nIFtzcmNdPVwiaW1nU3JjIHx8ICdodHRwczovL21lZGlhc2Z1LmNvbS9pbWFnZXMvbG9nbzE5Mi5wbmcnXCIgY2xhc3M9XCJsb2dvLWltYWdlXCIgYWx0PVwiTG9nb1wiIC8+XHJcbiAgPC9kaXY+XHJcbiAgPGZvcm0gW2Zvcm1Hcm91cF09XCJ3ZWxjb21lRm9ybVwiIChuZ1N1Ym1pdCk9XCJoYW5kbGVDb25maXJtKClcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1jb250YWluZXJcIj5cclxuICAgICAgPGlucHV0XHJcbiAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwibmFtZVwiXHJcbiAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgIHBsYWNlaG9sZGVyPVwiRXZlbnQgRGlzcGxheSBOYW1lXCJcclxuICAgICAgICBjbGFzcz1cImlucHV0LWZpZWxkXCJcclxuICAgICAgLz5cclxuICAgICAgPGlucHV0XHJcbiAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwic2VjcmV0XCJcclxuICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgcGxhY2Vob2xkZXI9XCJFdmVudCBUb2tlbiAoU2VjcmV0KVwiXHJcbiAgICAgICAgY2xhc3M9XCJpbnB1dC1maWVsZFwiXHJcbiAgICAgIC8+XHJcbiAgICAgIDxpbnB1dFxyXG4gICAgICAgIGZvcm1Db250cm9sTmFtZT1cImV2ZW50SURcIlxyXG4gICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICBwbGFjZWhvbGRlcj1cIkV2ZW50IElEXCJcclxuICAgICAgICBjbGFzcz1cImlucHV0LWZpZWxkXCJcclxuICAgICAgLz5cclxuICAgICAgPGlucHV0XHJcbiAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwibGlua1wiXHJcbiAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgIHBsYWNlaG9sZGVyPVwiRXZlbnQgTGlua1wiXHJcbiAgICAgICAgY2xhc3M9XCJpbnB1dC1maWVsZFwiXHJcbiAgICAgIC8+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiY29uZmlybS1idXR0b25cIj5Db25maXJtPC9idXR0b24+XHJcbiAgPC9mb3JtPlxyXG5cclxuICA8ZGl2IGNsYXNzPVwic2Nhbm5lci1jb250YWluZXJcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJvci1jb250YWluZXJcIj5cclxuICAgICAgPGhyIGNsYXNzPVwiaG9yaXpvbnRhbC1saW5lXCIgLz5cclxuICAgICAgPHNwYW4gY2xhc3M9XCJvci10ZXh0XCI+T1I8L3NwYW4+XHJcbiAgICAgIDxociBjbGFzcz1cImhvcml6b250YWwtbGluZVwiIC8+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgKm5nSWY9XCJpc1NjYW5uZXJWaXNpYmxlXCIgY2xhc3M9XCJzY2FubmVyLXdyYXBwZXJcIj5cclxuICAgICAgPHp4aW5nLXNjYW5uZXJcclxuICAgICAgICBbZGV2aWNlXT1cImN1cnJlbnREZXZpY2UhXCJcclxuICAgICAgICAoc2NhblN1Y2Nlc3MpPVwiaGFuZGxlU2NhblN1Y2Nlc3MoJGV2ZW50KVwiXHJcbiAgICAgICAgW3RyeUhhcmRlcl09XCJ0cnVlXCJcclxuICAgICAgPjwvenhpbmctc2Nhbm5lcj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cInNjYW4tYnV0dG9uLWNvbnRhaW5lclwiICpuZ0lmPVwiIWlzU2Nhbm5lclZpc2libGVcIj5cclxuICAgICAgPGJ1dHRvbiAoY2xpY2spPVwidG9nZ2xlU2Nhbm5lcigpXCIgY2xhc3M9XCJzY2FuLWJ1dHRvblwiPlxyXG4gICAgICAgIDxmYS1pY29uIFtpY29uXT1cImZhUXJjb2RlXCIgc3R5bGU9XCJtYXJnaW4tcmlnaHQ6IDVweFwiPjwvZmEtaWNvbj5cclxuICAgICAgICBTY2FuIFFSIENvZGVcclxuICAgICAgPC9idXR0b24+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj5cclxuXHJcbiAgPGRpdiBjbGFzcz1cImFkZGl0aW9uYWwtb3B0aW9ucy1jb250YWluZXJcIj5cclxuICAgIDxwPlxyXG4gICAgICBQcm92aWRlIHRoZSBldmVudCBkZXRhaWxzIGVpdGhlciBieSB0eXBpbmcgbWFudWFsbHkgb3Igc2Nhbm5pbmcgdGhlXHJcbiAgICAgIFFSLWNvZGUgdG8gYXV0b2ZpbGwuXHJcbiAgICA8L3A+XHJcbiAgICA8cD5Eb24ndCBoYXZlIGEgc2VjcmV0PzwvcD5cclxuICAgIDxhXHJcbiAgICAgIGhyZWY9XCJodHRwczovL21lZXRpbmcubWVkaWFzZnUuY29tL21lZXRpbmcvc3RhcnQvXCJcclxuICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcclxuICAgICAgY2xhc3M9XCJsaW5rXCJcclxuICAgICAgPkdldCBvbmUgZnJvbSBtZWRpYXNmdS5jb208L2FcclxuICAgID5cclxuICA8L2Rpdj5cclxuPC9kaXY+XHJcbiJdfQ==